function getAttribCheck(a,b){return"function"==typeof b?function(c){return c.attribs&&b(c.attribs[a])}:function(c){return c.attribs&&c.attribs[a]===b}}function combineFuncs(a,b){return function(c){return a(c)||b(c)}}var ElementType=require("domelementtype"),isTag=exports.isTag=ElementType.isTag;exports.testElement=function(a,b){for(var c in a)if(a.hasOwnProperty(c)){if("tag_name"===c){if(!isTag(b)||!a.tag_name(b.name))return!1}else if("tag_type"===c){if(!a.tag_type(b.type))return!1}else if("tag_contains"===c){if(isTag(b)||!a.tag_contains(b.data))return!1}else if(!b.attribs||!a[c](b.attribs[c]))return!1}else;return!0};var Checks={tag_name:function(a){return"function"==typeof a?function(b){return isTag(b)&&a(b.name)}:"*"===a?isTag:function(b){return isTag(b)&&b.name===a}},tag_type:function(a){return"function"==typeof a?function(b){return a(b.type)}:function(b){return b.type===a}},tag_contains:function(a){return"function"==typeof a?function(b){return!isTag(b)&&a(b.data)}:function(b){return!isTag(b)&&b.data===a}}};exports.getElements=function(a,b,c,d){var e=Object.keys(a).map(function(b){var c=a[b];return b in Checks?Checks[b](c):getAttribCheck(b,c)});return 0===e.length?[]:this.filter(e.reduce(combineFuncs),b,c,d)},exports.getElementById=function(a,b,c){return Array.isArray(b)||(b=[b]),this.findOne(getAttribCheck("id",a),b,c!==!1)},exports.getElementsByTagName=function(a,b,c,d){return this.filter(Checks.tag_name(a),b,c,d)},exports.getElementsByTagType=function(a,b,c,d){return this.filter(Checks.tag_type(a),b,c,d)};