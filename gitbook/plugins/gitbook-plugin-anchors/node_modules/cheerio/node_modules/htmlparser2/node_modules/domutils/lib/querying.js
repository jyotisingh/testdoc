function filter(a,b,c,d){return Array.isArray(b)||(b=[b]),"number"==typeof d&&isFinite(d)||(d=1/0),find(a,b,c!==!1,d)}function find(a,b,c,d){for(var e,f=[],g=0,h=b.length;h>g&&!(a(b[g])&&(f.push(b[g]),--d<=0))&&(e=b[g].children,!(c&&e&&e.length>0&&(e=find(a,e,c,d),f=f.concat(e),d-=e.length,0>=d)));g++);return f}function findOneChild(a,b){for(var c=0,d=b.length;d>c;c++)if(a(b[c]))return b[c];return null}function findOne(a,b){for(var c=null,d=0,e=b.length;e>d&&!c;d++)isTag(b[d])&&(a(b[d])?c=b[d]:b[d].children.length>0&&(c=findOne(a,b[d].children)));return c}function existsOne(a,b){for(var c=0,d=b.length;d>c;c++)if(isTag(b[c])&&(a(b[c])||b[c].children.length>0&&existsOne(a,b[c].children)))return!0;return!1}function findAll(a,b){for(var c=[],d=0,e=b.length;e>d;d++)isTag(b[d])&&(a(b[d])&&c.push(b[d]),b[d].children.length>0&&(c=c.concat(findAll(a,b[d].children))));return c}var isTag=require("domelementtype").isTag;module.exports={filter:filter,find:find,findOneChild:findOneChild,findOne:findOne,existsOne:existsOne,findAll:findAll};