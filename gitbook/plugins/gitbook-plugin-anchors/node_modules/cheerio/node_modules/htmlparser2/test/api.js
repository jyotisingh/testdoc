var htmlparser2=require(".."),assert=require("assert");describe("API",function(){it("should load all modules",function(){var a=require("../lib/Stream.js");assert.strictEqual(htmlparser2.Stream,a,"should load module"),assert.strictEqual(htmlparser2.Stream,a,"should load it again (cache)");var b=require("../lib/ProxyHandler.js");assert.strictEqual(htmlparser2.ProxyHandler,b,"should load module"),assert.strictEqual(htmlparser2.ProxyHandler,b,"should load it again (cache)")}),it("should work without callbacks",function(){var a=new htmlparser2.Parser(null,{xmlMode:!0,lowerCaseAttributeNames:!0});a.end("<a foo><bar></a><!-- --><![CDATA[]]]><?foo?><!bar><boo/>boohay"),a.write("foo"),a.end();var b=!1;a._cbs.onerror=function(){b=!0},a.write("foo"),assert(b),b=!1,a.end(),assert(b),a.reset(),a._cbs.onopentag=function(){},a.write("<a foo"),a._cbs.onopentag=null,a.write(">");var c=!1;a._cbs.ontext=function(a){assert.equal(a,"foo"),c=!0},a.pause(),a.write("foo"),assert(!c),a.resume(),assert(c),c=!1,a.pause(),assert(!c),a.resume(),assert(!c),a.pause(),a.end("foo"),assert(!c),a.resume(),assert(c)}),it("should update the position",function(){var a=new htmlparser2.Parser(null);a.write("foo"),assert.equal(a.startIndex,0),a.write("<bar>"),assert.equal(a.startIndex,3)})});