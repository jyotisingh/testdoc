function render(a,b,c){if(b)"string"==typeof b&&(b=select(b,a._root,c));else{if(!a._root||!a._root.children)return"";b=a._root.children}return serialize(b,c)}var select=require("css-select"),parse=require("./parse"),serialize=require("dom-serializer"),_=require("lodash");exports.load=function(a,b){var c=require("./cheerio");b=_.defaults(b||{},c.prototype.options);var d=parse(a,b),e=function(a,f,g,h){return this instanceof e?(h=_.defaults(h||{},b),c.call(this,a,f,g||d,h)):new e(a,f,g,h)};return e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.fn=e.prototype,e.prototype._originalRoot=d,_.merge(e,exports),e._root=d,e._options=b,e},exports.html=function(a,b){var c=require("./cheerio");return"[object Object]"!==Object.prototype.toString.call(a)||b||"length"in a||"type"in a||(b=a,a=void 0),b=_.defaults(b||{},this._options,c.prototype.options),render(this,a,b)},exports.xml=function(a){var b=_.defaults({xmlMode:!0},this._options);return render(this,a,b)},exports.text=function(a){if(!a)return"";for(var b,c="",d=a.length,e=0;d>e;e++)b=a[e],"text"===b.type?c+=b.data:b.children&&"comment"!==b.type&&(c+=exports.text(b.children));return c},exports.parseHTML=function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b),d=this.load(a),c||d("script").remove(),d.root()[0].children.slice()):null},exports.root=function(){return this(this._root)},exports.contains=function(a,b){if(b===a)return!1;for(;b&&b!==b.parent;)if(b=b.parent,b===a)return!0;return!1};