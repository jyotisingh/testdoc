var htmlparser=require("htmlparser2");exports=module.exports=function(a,b){var c=exports.evaluate(a,b),d=exports.evaluate("<root></root>",b)[0];return d.type="root",exports.update(c,d),d},exports.evaluate=function(a,b){var c;return c="string"==typeof a||Buffer.isBuffer(a)?htmlparser.parseDOM(a,b):a},exports.update=function(a,b){Array.isArray(a)||(a=[a]),b?b.children=a:b=null;for(var c=0;c<a.length;c++){var d=a[c],e=d.parent||d.root,f=e&&e.children;f&&f!==a&&(f.splice(f.indexOf(d),1),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev)),b?(d.prev=a[c-1]||null,d.next=a[c+1]||null):d.prev=d.next=null,b&&"root"===b.type?(d.root=b,d.parent=null):(d.root=null,d.parent=b)}return b};